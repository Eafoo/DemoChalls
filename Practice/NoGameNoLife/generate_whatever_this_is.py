import qrcode, generate_data, numpy as np, cv2, base64

f = open('flag.txt', 'rb').read()
data = generate_data.gen_data(f)
img = qrcode.make(base64.b64encode(data))
img = np.array(img)[::10, ::10]
cv2.imwrite('what_is_this.png', img.astype(float) * 255)
is_black = np.invert(img[4:-4:2, 4:-4:2]).astype(int)
col_sum = np.sum(np.invert(img[4:-4, 4:-4]).astype(int), axis=0)
row_sum = np.sum(np.invert(img[4:-4, 4:-4]).astype(int), axis=1)
print("is_black =", is_black.tolist())
print("row_sum =", row_sum.tolist())
print("col_sum =", col_sum.tolist())

"""
Output:
is_black = [[1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1], 
            [1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1], 
            [1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1], 
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 
            [1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1], 
            [1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0], 
            [0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0], 
            [0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 0], 
            [1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 0, 1], 
            [1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 0], 
            [0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0], 
            [0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0], 
            [0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0], 
            [0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 0, 0], 
            [1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0], 
            [1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0], 
            [1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0], 
            [1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 0], 
            [1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1]]
row_sum = [28, 11, 19, 22, 23, 13, 25, 12, 21, 21, 17, 16, 19, 12, 17, 15, 16, 21, 18, 18, 19, 21, 17, 19, 17, 18, 17, 20, 17, 16, 23, 16, 20, 16, 20, 19, 27]
col_sum = [24, 11, 19, 22, 19, 15, 25, 9, 21, 25, 18, 14, 16, 19, 18, 14, 21, 20, 16, 18, 15, 23, 27, 17, 17, 12, 20, 18, 22, 15, 26, 15, 23, 17, 23, 16, 16]
"""